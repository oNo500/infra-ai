# Skill Builder

**核心功能**：将分散的规则文件编译成 AI 学习文档

## 架构流程

```text
[输入 Inputs]
    |
    |-- rules/*.md        (原子化的知识规则)
    |-- metadata.json     (版本和配置信息)
    |-- _sections.md      (章节元数据)
    |
    v
+-----------------------------------+
|         处理流程 Pipeline          |
+-----------------------------------+
| 1. Parse      解析规则文件         |
| 2. Sort       按章节/标题排序      |
| 3. Merge      合并为单一文档       |
| 4. Format     生成目录和元数据     |
| 5. Extract    提取测试用例         |
| 6. Version    (可选) 升级版本号    |
+-----------------------------------+
    |
    v
[输出 Outputs]
    |
    |-- AGENTS.md            (AI 专用教科书 - 主产物)
    |-- test-cases.json      (自动提取的测试用例)
    |-- metadata.json*       (更新版本号)
    |-- SKILL.md*           (更新版本号)
    |
    (* 仅在 --upgrade-version 时)
```

## 详细说明

### 输入
- **`rules/*.md`** - 原子化的知识规则，每个文件代表一条最佳实践
- **`metadata.json`** - 版本号、组织名称、摘要等元信息
- **`_sections.md`** - 章节标题、优先级、描述等元数据

### 处理流程
1. **解析** - 读取并解析所有 `.md` 规则文件的结构
2. **排序** - 按章节编号和标题字母顺序整理
3. **合并** - 将所有规则拼接成单一结构化文档
4. **格式化** - 生成目录 (ToC)、添加元数据、标准化格式
5. **提取** - 从代码示例中提取 good/bad 测试用例
6. **版本管理** - 可选地自动升级版本号（末位 +1）

### 输出
- **`AGENTS.md`** - AI 专用教科书（主产物），包含完整的规则集、目录、示例
- **`test-cases.json`** - 自动提取的测试用例，用于验证 AI 理解
- 更新后的 `metadata.json` 和 `SKILL.md`（仅更新版本号）

## 一句话总结

**规则编译器** - 把零散的 Markdown 规则拼成 AI 能高效学习的单一文档。

